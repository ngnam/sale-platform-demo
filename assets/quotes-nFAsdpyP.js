import"./menu-Bhhdg46M.js";import{t as e}from"./_plugin-vue_export-helper-DPrR5wxB.js";import"./input-eiSd8m4U.js";import"./table-CUhhiDtX.js";import"./select-CUdbhWXi.js";import"./Col-BC3b6lLj.js";import"./FolderOutlined-BkULr9jo.js";import"./EyeInvisibleOutlined-CiHbfsZv.js";import"./modal-BY8tMKRC.js";import"./move-CCKEGgz9.js";import"./checkbox-CSeGYwQi.js";import"./space-bW3FXfWa.js";import"./dropdown-DVBnKecP.js";import"./dayjs-DvilRDeO.js";import"./row-B4B5NydT.js";import"./SwapRightOutlined-Bi0nCzpl.js";import"./date-picker-HvRiVABG.js";import"./es-cWQM0SPO.js";import"./UpOutlined-BExqSuUa.js";import"./spin-BdioGjXa.js";import"./ArrowRightOutlined-BcK4grMB.js";import"./popconfirm-D6WnTNwW.js";import{Cn as t,Dn as n,Jn as r,Kn as i,Qn as a,Sn as o,Tn as s,Un as c,ir as l,kn as u,ln as d,rr as f,u as p,ur as m,xn as h}from"./index-_V7Bdtlq.js";import"./Icon-Br7fy9kg.js";import{n as g,t as _}from"./useMessage-CuclRmiw.js";import"./dateUtil-CChGlgN1.js";import"./dashboard-Bc1W5CXC.js";import{t as v}from"./apis-CDRC9HDP.js";import{n as y,r as b}from"./illustration-Cbp8AiXP.js";import"./termRate-DVeN5Orq.js";const x=[{title:`Mã báo giá`,dataIndex:`quoteId`,width:100,customRender:({text:e})=>e},{title:`Mã sản phẩm`,dataIndex:`planId`,width:150,customRender:({text:e})=>e},{title:`Phiên bản định phí`,dataIndex:`pricingVersionId`,width:150,customRender:({text:e})=>e},{title:`Hình thức thanh toán`,dataIndex:`mode`,width:220,customRender:({text:e})=>e},{title:`Kỳ hạn (tháng)`,dataIndex:`termMonths`,width:180,customRender:({text:e})=>e},{title:`Trạng thái`,dataIndex:`status`,width:150,customRender:({text:e})=>e},{title:`Ngày tạo`,dataIndex:`createdAt`,key:`toDateTime`,width:150},{title:`Hành động`,key:`action`,width:120,fixed:`right`}];var S={key:1,class:`node-conatiner`},C=e(u({__name:`index`,setup(e){let u=d(),{createConfirm:C}=_(),w=l(),T=f([{label:`Delete`,type:`custom`,iconCustom:`DeleteOutlined`,popConfirm:{title:`Are you sure to delete?`,onConfirm:async e=>{try{let t=await y.remove(e?.quoteId);if(t){console.log(`Delete successful:`,t);let{createMessage:e}=_();e.success(t?.data?.message||`Deleted successfully`)}else console.error(`Delete failed:`,t)}catch(e){console.log(`Lỗi khi gọi Delete:`,e?.response)}finally{w.value?.refresh()}},onCancel:()=>{}}}]),E=f({appId:null,leadId:null});f({type:`primary`,label:`Tạo mới`,onClick:()=>{u.push(`/quotes/create`)}});let D=h(()=>[{type:`search`,name:`appId`,placeholder:`Tìm mã hồ sơ YCBH`,disabled:!0},{type:`lazyselect`,name:`leadId`,placeholder:`Chọn khách hàng`,pageSize:10,fetchApiUsers:A,labelKey:`fullName`,valueKey:`leadId`,allowClear:!0},{type:`lazyselect`,name:`appId`,placeholder:`Chọn hồ sơ YCBH`,pageSize:10,fetchApiUsers:k,labelKey:`appId`,valueKey:`appId`,allowClear:!0}]),O=async e=>{!e||e.length==0||C({title:`Xoá tất cả hồ sơ đã chọn`,content:`Are you sure to delete?`,iconType:`warning`,onOk(){p.info(`Đang phát triển`)}})},k=async(e,t,n)=>(await b.getAll({page:t,pageSize:n,leadId:E.leadId||void 0})).items,A=async(e,t,n)=>(await v.getAll({page:t,pageSize:n,leadId:e})).items;return(e,l)=>{let u=g,d=i(`router-view`);return c(),t(d,null,{default:a(({Component:e})=>[e?(c(),t(r(e),{key:0})):(c(),s(`div`,S,[l[0]||=o(`h2`,{class:`nc_title font18`},`Danh sách báo giá`,-1),n(u,{ref_key:`ELRef`,ref:w,rowKey:`appId`,url:m(y).getAll,columns:m(x),items:m(D),actions:m(T),model:m(E),onOnDeleteAll:O,scroll:{x:700}},null,8,[`url`,`columns`,`items`,`actions`,`model`])]))]),_:1})}}}),[[`__scopeId`,`data-v-b9802f9d`]]);export{C as default};