import"./EyeInvisibleOutlined-vBZdbnb5.js";import{n as e,t}from"./_plugin-vue_export-helper-CCMMWqEJ.js";import"./input-CE70cYGf.js";import"./table-Bj7AWOqL.js";import"./select-BktQDR1e.js";import"./Col-B88sKFw0.js";import"./FolderOutlined-v8Whbuap.js";import"./modal-DoGUrgx-.js";import"./checkbox-o3cgUXip.js";import"./space-CGZIuoRS.js";import"./dropdown-kgT51ow1.js";import"./dayjs-DP6SAfo6.js";import"./row-CYcdmHKM.js";import"./SwapRightOutlined-B30FF2QO.js";import"./date-picker-C5HhZTvF.js";import{s as n}from"./es-1eb-LgCN.js";import"./UpOutlined-ZUi5vTGj.js";import"./spin-D756cOu2.js";import"./ArrowRightOutlined-BTInphOv.js";import"./popconfirm-Cd8ZXcgh.js";import{Dn as r,En as i,Kn as a,Sn as o,Tn as s,Vn as c,Wn as l,Xn as u,bn as d,cn as f,cr as p,l as m,nr as h,tr as g,wn as _,xn as v}from"./index-DYE8AE99.js";import"./Icon-wKyRgJuN.js";import{n as y,t as b}from"./useMessage-dey3GAsK.js";import"./dateUtil-JHk6KmED.js";import"./dashboard-BEsjBnuR.js";import{t as x}from"./apis-FsNPzbV2.js";import{r as S}from"./illustration-CPLV9fxe.js";import"./termRate-RKhZ2cNF.js";const C=[{title:`Mã hồ sơ YCBH`,dataIndex:`appId`,width:200,customRender:({text:e})=>e.slice(0,5)+`******`},{title:`Tên khách hàng/Tên công ty`,dataIndex:[`lead`,`fullName`],width:220,customRender:({text:e})=>e},{title:`Loại khách hàng`,dataIndex:[`lead`,`isOrganization`],width:150,customRender:({value:e})=>e===!0?`Tổ chức`:`Cá nhân`},{title:`Mã số thuế/Giấy tờ tuỳ thân`,dataIndex:[`lead`,`isOrganization`],width:220,customRender:({value:e,record:t})=>{let n=e===!0||t?.lead?.isOrganization===!0,r=t?.lead?.taxNumber??`-`,i=t?.lead.idNumber??`-`;return n?r:i}},{title:`Giới tính`,dataIndex:[`lead`,`gender`],width:180,customRender:({text:e})=>e},{title:`Trạng thái`,dataIndex:`status`,width:150,customRender:({text:e})=>e},{title:`Ngày tạo`,dataIndex:`createdAt`,key:`toDateTime`,width:150},{title:`Ngày cập nhật`,dataIndex:`updatedAt`,key:`toDateTime`,width:150},{title:`Hành động`,key:`action`,width:120,fixed:`right`}];var w={key:1,class:`node-conatiner`},T=t(r({__name:`index`,setup(t){let r=f(),{createConfirm:T}=b(),E=h(),D=()=>E.value?.refresh(),O=g([{label:`Tạo báo giá`,type:`custom`,iconCustom:`EditOutlined`,onClick:e=>{r.push(`/quotes/create?appId=${e?.appId}`)}},{label:`Delete`,type:`custom`,iconCustom:`DeleteOutlined`,popConfirm:{title:`Bạn chắc chắn muốn xoá hồ sơ YCBH này?`,onConfirm:async e=>{console.log(e);try{if(e&&e.appId){var t=await S.remove(e.appId);console.log(`delete success`,t),m.success(t.message||`Đã xoá hồ sơ YCBH này`),D()}}catch(e){console.log(`delete`,e)}},onCancel:()=>{}}}]),k=g({leadId:null});g({type:`primary`,label:`Tạo mới`,onClick:()=>{}});let A=d(()=>[{type:`search`,name:`leadId`,placeholder:`Tìm mã khách hàng`,disabled:!0},{type:`lazyselect`,name:`leadId`,placeholder:`Chọn khách hàng`,pageSize:10,fetchApiUsers:M,labelKey:`fullName`,valueKey:`leadId`,allowClear:!0}]),j=async e=>{!e||e.length==0||T({title:`Xoá tất cả hồ sơ đã chọn`,content:`Are you sure to delete?`,iconType:`warning`,onOk(){m.info(`Đang phát triển`)}})},M=async(e,t,n)=>(await x.getAll({page:t,pageSize:n,leadId:e})).items;return(t,r)=>{let d=n,f=e,m=y,h=l(`router-view`);return c(),o(h,null,{default:u(({Component:e})=>[e?(c(),o(a(e),{key:0})):(c(),_(`div`,w,[r[1]||=v(`h2`,{class:`nc_title font18`},`Danh sách Hồ sơ YCBH`,-1),i(f,{type:`default`,style:{"margin-bottom":`5px`}},{default:u(()=>[i(d),r[0]||=s(` Ghi âm `,-1)]),_:1}),i(m,{ref_key:`ELRef`,ref:E,rowKey:`appId`,url:p(S).getAll,columns:p(C),items:p(A),actions:p(O),model:p(k),onOnDeleteAll:j,scroll:{x:1200,y:500}},null,8,[`url`,`columns`,`items`,`actions`,`model`])]))]),_:1})}}}),[[`__scopeId`,`data-v-8c0b3f90`]]);export{T as default};