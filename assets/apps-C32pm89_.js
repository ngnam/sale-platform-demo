import"./menu-Bhhdg46M.js";import{n as e,t}from"./_plugin-vue_export-helper-DPrR5wxB.js";import"./input-eiSd8m4U.js";import"./table-CUhhiDtX.js";import"./select-CUdbhWXi.js";import"./Col-BC3b6lLj.js";import"./FolderOutlined-BkULr9jo.js";import"./EyeInvisibleOutlined-CiHbfsZv.js";import"./modal-BY8tMKRC.js";import"./move-CCKEGgz9.js";import"./checkbox-CSeGYwQi.js";import"./space-bW3FXfWa.js";import"./dropdown-DVBnKecP.js";import"./dayjs-DvilRDeO.js";import"./row-B4B5NydT.js";import"./SwapRightOutlined-Bi0nCzpl.js";import"./date-picker-HvRiVABG.js";import{Hi as n}from"./es-cWQM0SPO.js";import"./UpOutlined-BExqSuUa.js";import"./spin-BdioGjXa.js";import"./ArrowRightOutlined-BcK4grMB.js";import"./popconfirm-D6WnTNwW.js";import{Cn as r,Dn as i,En as a,Jn as o,Kn as s,Qn as c,Sn as l,Tn as u,Un as d,ir as f,kn as p,ln as m,rr as h,u as g,ur as _,xn as v}from"./index-_V7Bdtlq.js";import"./Icon-Br7fy9kg.js";import{n as y,t as b}from"./useMessage-CuclRmiw.js";import"./dateUtil-CChGlgN1.js";import"./dashboard-Bc1W5CXC.js";import{t as x}from"./apis-CDRC9HDP.js";import{r as S}from"./illustration-Cbp8AiXP.js";import"./termRate-DVeN5Orq.js";const C=[{title:`Mã hồ sơ YCBH`,dataIndex:`appId`,width:200,customRender:({text:e})=>e.slice(0,5)+`******`},{title:`Tên khách hàng/Tên công ty`,dataIndex:[`lead`,`fullName`],width:220,customRender:({text:e})=>e},{title:`Loại khách hàng`,dataIndex:[`lead`,`isOrganization`],width:150,customRender:({value:e})=>e===!0?`Tổ chức`:`Cá nhân`},{title:`Mã số thuế/Giấy tờ tuỳ thân`,dataIndex:[`lead`,`isOrganization`],width:220,customRender:({value:e,record:t})=>{let n=e===!0||t?.lead?.isOrganization===!0,r=t?.lead?.taxNumber??`-`,i=t?.lead.idNumber??`-`;return n?r:i}},{title:`Giới tính`,dataIndex:[`lead`,`gender`],width:180,customRender:({text:e})=>e},{title:`Trạng thái`,dataIndex:`status`,width:150,customRender:({text:e})=>e},{title:`Ngày tạo`,dataIndex:`createdAt`,key:`toDateTime`,width:150},{title:`Ngày cập nhật`,dataIndex:`updatedAt`,key:`toDateTime`,width:150},{title:`Hành động`,key:`action`,width:120,fixed:`right`}];var w={key:1,class:`node-conatiner`},T=t(p({__name:`index`,setup(t){let p=m(),{createConfirm:T}=b(),E=f(),D=()=>E.value?.refresh(),O=h([{label:`Tạo báo giá`,type:`custom`,iconCustom:`EditOutlined`,onClick:e=>{p.push(`/quotes/create?appId=${e?.appId}`)}},{label:`Delete`,type:`custom`,iconCustom:`DeleteOutlined`,popConfirm:{title:`Bạn chắc chắn muốn xoá hồ sơ YCBH này?`,onConfirm:async e=>{console.log(e);try{if(e&&e.appId){var t=await S.remove(e.appId);console.log(`delete success`,t),g.success(t.message||`Đã xoá hồ sơ YCBH này`),D()}}catch(e){console.log(`delete`,e)}},onCancel:()=>{}}}]),k=h({leadId:null});h({type:`primary`,label:`Tạo mới`,onClick:()=>{}});let A=v(()=>[{type:`search`,name:`leadId`,placeholder:`Tìm mã khách hàng`,disabled:!0},{type:`lazyselect`,name:`leadId`,placeholder:`Chọn khách hàng`,pageSize:10,fetchApiUsers:M,labelKey:`fullName`,valueKey:`leadId`,allowClear:!0}]),j=async e=>{!e||e.length==0||T({title:`Xoá tất cả hồ sơ đã chọn`,content:`Are you sure to delete?`,iconType:`warning`,onOk(){g.info(`Đang phát triển`)}})},M=async(e,t,n)=>(await x.getAll({page:t,pageSize:n,leadId:e})).items;return(t,f)=>{let p=n,m=e,h=y,g=s(`router-view`);return d(),r(g,null,{default:c(({Component:e})=>[e?(d(),r(o(e),{key:0})):(d(),u(`div`,w,[f[1]||=l(`h2`,{class:`nc_title font18`},`Danh sách Hồ sơ YCBH`,-1),i(m,{type:`default`,style:{"margin-bottom":`5px`}},{default:c(()=>[i(p),f[0]||=a(` Ghi âm `,-1)]),_:1}),i(h,{ref_key:`ELRef`,ref:E,rowKey:`appId`,url:_(S).getAll,columns:_(C),items:_(A),actions:_(O),model:_(k),onOnDeleteAll:j,scroll:{x:1200,y:500}},null,8,[`url`,`columns`,`items`,`actions`,`model`])]))]),_:1})}}}),[[`__scopeId`,`data-v-8c0b3f90`]]);export{T as default};