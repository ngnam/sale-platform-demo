import"./menu-KmJeyBmp.js";import{t as e}from"./_plugin-vue_export-helper-DjLyun5i.js";import"./input-Dl58X2zG.js";import"./table-B5NlV_bM.js";import"./select-qwNyy2X6.js";import"./Col-Dn_WxAuq.js";import"./FolderOutlined-CuOYp4hi.js";import"./EyeInvisibleOutlined-DQ7XOaOB.js";import"./modal-7zbmb4iA.js";import"./move-BV2dG8Yt.js";import"./checkbox-DTOnil2W.js";import"./space-BwjoyeVf.js";import"./dropdown-BjYLSNDe.js";import"./dayjs-Di-yguGE.js";import"./row-DAVpSNuc.js";import"./SwapRightOutlined-DC-xg5cP.js";import"./date-picker-ekm1N11q.js";import"./es-DfE0qcvE.js";import"./UpOutlined-CVKY-LmD.js";import"./spin-CjGf5sPd.js";import"./ArrowRightOutlined-jL2ruyWB.js";import"./popconfirm-Mr8MyDf8.js";import{Cn as t,Dn as n,Jn as r,Kn as i,Qn as a,Sn as o,Tn as s,Un as c,ir as l,kn as u,ln as d,rr as f,u as p,ur as m,xn as h}from"./index-DNW3ueIJ.js";import"./Icon-LsJhdwkb.js";import{n as g,t as _}from"./useMessage-DSgnIS7F.js";import"./dateUtil-Dnzq1uhr.js";import"./dashboard-DlJiyMhc.js";import"./apis-CS6yn99a.js";import{t as v}from"./illustration-B_wBWmkM.js";import"./termRate-DOCLy62Z.js";const y=[{title:`Mã bảng minh hoạ`,dataIndex:`illuId`,width:200,customRender:({text:e})=>e},{title:`Kỳ hạn (tháng)`,dataIndex:`projectionMonths`,width:220,customRender:({text:e})=>e},{title:`planId`,dataIndex:`planId`,width:150,customRender:({text:e})=>e},{title:`pricingVersionId`,dataIndex:`pricingVersionId`,width:150,customRender:({text:e})=>e},{title:`Status`,dataIndex:`status`,width:150,customRender:({text:e})=>e},{title:`GeneratedAt`,dataIndex:`generatedAt`,key:`toDateTime`,width:150},{title:`Hành động`,key:`action`,width:120,fixed:`right`}];var b={key:1,class:`node-conatiner`},x=e(u({__name:`index`,setup(e){let u=d(),{createConfirm:x}=_(),S=l(),C=f([{label:`Download`,type:`custom`,iconCustom:`DownloadOutlined`,onClick:async e=>{await k(e?.illuId)}},{label:`Delete`,type:`custom`,iconCustom:`DeleteOutlined`,popConfirm:{title:`Are you sure to delete?`,onConfirm:async e=>{try{let t=await v.remove(e?.illuId);if(t){console.log(`Delete successful:`,t);let{createMessage:e}=_();e.success(t?.data?.message||`Deleted successfully`)}else console.error(`Delete failed:`,t)}catch(e){console.log(`Lỗi khi gọi Delete:`,e?.response)}finally{S.value?.refresh()}},onCancel:()=>{}}}]),w=f({q:null});f({type:`primary`,label:`Tạo mới`,onClick:()=>{u.push(`/illustration/create`)}});let T=h(()=>[{type:`search`,name:`q`,placeholder:`Tìm theo tên/Mst/Số định danh/Số điện thoại`}]),E=async e=>{!e||e.length==0||x({title:`Xoá tất cả hồ sơ đã chọn`,content:`Are you sure to delete?`,iconType:`warning`,onOk(){p.info(`Đang phát triển`)}})},D=l(!1);function O(e){if(!e)return null;let t=/filename\*?=(?:UTF-8'')?["']?([^;"']+)["']?/i.exec(e);if(!t)return null;try{return decodeURIComponent(t[1].replace(/['"]/g,``))}catch{return t[1].replace(/['"]/g,``)}}async function k(e){if(!e){p.warn(`No PDF`);return}D.value=!0;try{let t=await v.getPdf(e),n,r=`illustration-${e}.pdf`;if(t&&typeof t==`object`&&`data`in t){n=t.data instanceof Blob?t.data:new Blob([t.data],{type:`application/pdf`});let e=(t.headers&&(t.headers[`content-disposition`]||t.headers[`Content-Disposition`]))??null;r=O(e)??r}else if(t&&typeof t.blob==`function`){n=await t.blob();let e=t.headers?.get?.(`content-disposition`)??null;r=O(e)??r}else n=t instanceof Blob?t:new Blob([JSON.stringify(t)],{type:`application/pdf`});let i=window.URL.createObjectURL(n),a=document.createElement(`a`);a.href=i,a.download=r,document.body.appendChild(a),a.click(),a.remove(),window.URL.revokeObjectURL(i),p.success(`Download started`)}catch(e){console.error(e),p.error(e?.message??`Download failed`)}finally{D.value=!1}}return(e,l)=>{let u=g,d=i(`router-view`);return c(),t(d,null,{default:a(({Component:e})=>[e?(c(),t(r(e),{key:0})):(c(),s(`div`,b,[l[0]||=o(`h2`,{class:`nc_title font18`},`Bảng minh hoạ`,-1),n(u,{ref_key:`ELRef`,ref:S,rowKey:`illuId`,url:m(v).getAll,columns:m(y),items:m(T),actions:m(C),model:m(w),onOnDeleteAll:E,scroll:{x:700}},null,8,[`url`,`columns`,`items`,`actions`,`model`])]))]),_:1})}}}),[[`__scopeId`,`data-v-9414f433`]]);export{x as default};