import"./EyeInvisibleOutlined-DG2xmprD.js";import{n as e,t}from"./_plugin-vue_export-helper-D22GYgA4.js";import"./input-DRvzqShS.js";import"./table-BoE131Mg.js";import"./select-DfEOPWao.js";import"./Col-BFMs_Fxy.js";import"./FolderOutlined-BkPqpAWN.js";import"./modal-D0AgzIlU.js";import"./checkbox-CDJjs0Nq.js";import"./space-BuPMAf3f.js";import"./dropdown-BUREsQoH.js";import"./dayjs-vK52Z8Yb.js";import"./row-B-Sd1hj3.js";import"./SwapRightOutlined-CmGj0jrD.js";import"./date-picker-BNuGFo31.js";import{s as n}from"./es-D8_O4ojd.js";import"./UpOutlined-CkUro80v.js";import"./spin-BRviYb99.js";import"./ArrowRightOutlined-CuJhhTPj.js";import"./popconfirm-DrZZRqRZ.js";import{Dn as r,En as i,Kn as a,Sn as o,Tn as s,Vn as c,Wn as l,Xn as u,bn as d,cn as f,cr as p,l as m,nr as h,tr as g,wn as _,xn as v}from"./index-DsGbIOt6.js";import"./Icon-BrMK9QEX.js";import{n as y,t as b}from"./useMessage-C3--9aeY.js";import"./dateUtil-DqoZhjZO.js";import"./dashboard-CrghFKAJ.js";import{t as x}from"./apis-CCLk_NLi.js";import{r as S}from"./illustration-BXwaRMAg.js";import"./termRate-CiEhitJ4.js";const C=[{title:`Mã hồ sơ YCBH`,dataIndex:`appId`,width:200,customRender:({text:e})=>e.slice(0,5)+`******`},{title:`Tên khách hàng/Tên công ty`,dataIndex:[`lead`,`fullName`],width:220,customRender:({text:e})=>e},{title:`Loại khách hàng`,dataIndex:[`lead`,`isOrganization`],width:150,customRender:({value:e})=>e===!0?`Tổ chức`:`Cá nhân`},{title:`Mã số thuế/Giấy tờ tuỳ thân`,dataIndex:[`lead`,`isOrganization`],width:220,customRender:({value:e,record:t})=>{let n=e===!0||t?.lead?.isOrganization===!0,r=t?.lead?.taxNumber??`-`,i=t?.lead.idNumber??`-`;return n?r:i}},{title:`Giới tính`,dataIndex:[`lead`,`gender`],width:180,customRender:({text:e})=>e},{title:`Trạng thái`,dataIndex:`status`,width:150,customRender:({text:e})=>e},{title:`Ngày tạo`,dataIndex:`createdAt`,key:`toDateTime`,width:150},{title:`Ngày cập nhật`,dataIndex:`updatedAt`,key:`toDateTime`,width:150},{title:`Hành động`,key:`action`,width:120,fixed:`right`}];var w={key:1,class:`node-conatiner`},T=t(r({__name:`index`,setup(t){let r=f(),{createConfirm:T}=b(),E=h(),D=()=>E.value?.refresh(),O=g([{label:`Tạo báo giá`,type:`custom`,iconCustom:`EditOutlined`,onClick:e=>{r.push(`/quotes/create?appId=${e?.appId}`)}},{label:`Delete`,type:`custom`,iconCustom:`DeleteOutlined`,popConfirm:{title:`Bạn chắc chắn muốn xoá hồ sơ YCBH này?`,onConfirm:async e=>{console.log(e);try{if(e&&e.appId){var t=await S.remove(e.appId);console.log(`delete success`,t),m.success(t.message||`Đã xoá hồ sơ YCBH này`),D()}}catch(e){console.log(`delete`,e)}},onCancel:()=>{}}}]),k=g({leadId:null});g({type:`primary`,label:`Tạo mới`,onClick:()=>{}});let A=d(()=>[{type:`search`,name:`leadId`,placeholder:`Tìm mã khách hàng`,disabled:!0},{type:`lazyselect`,name:`leadId`,placeholder:`Chọn khách hàng`,pageSize:10,fetchApiUsers:M,labelKey:`fullName`,valueKey:`leadId`,allowClear:!0}]),j=async e=>{!e||e.length==0||T({title:`Xoá tất cả hồ sơ đã chọn`,content:`Are you sure to delete?`,iconType:`warning`,onOk(){m.info(`Đang phát triển`)}})},M=async(e,t,n)=>(await x.getAll({page:t,pageSize:n,leadId:e})).items;return(t,r)=>{let d=n,f=e,m=y,h=l(`router-view`);return c(),o(h,null,{default:u(({Component:e})=>[e?(c(),o(a(e),{key:0})):(c(),_(`div`,w,[r[1]||=v(`h2`,{class:`nc_title font18`},`Danh sách Hồ sơ YCBH`,-1),i(f,{type:`default`,style:{"margin-bottom":`5px`}},{default:u(()=>[i(d),r[0]||=s(` Ghi âm `,-1)]),_:1}),i(m,{ref_key:`ELRef`,ref:E,rowKey:`appId`,url:p(S).getAll,columns:p(C),items:p(A),actions:p(O),model:p(k),onOnDeleteAll:j,scroll:{x:1200,y:500}},null,8,[`url`,`columns`,`items`,`actions`,`model`])]))]),_:1})}}}),[[`__scopeId`,`data-v-8c0b3f90`]]);export{T as default};