import"./EyeInvisibleOutlined-BEfU4b7H.js";import{n as e,t}from"./_plugin-vue_export-helper-B7nIStOx.js";import"./input-B6Z8fLJr.js";import"./table-CHoPGXGQ.js";import"./select-BTuKSqOm.js";import"./Col-DyoQw_cT.js";import"./FolderOutlined-CViWk2Kw.js";import"./modal-LfS8E54v.js";import"./checkbox-B_sO6a1e.js";import"./space-CL3wf0Tc.js";import"./dropdown-CwrvQ9kw.js";import"./dayjs-eyFkofVj.js";import"./row-Ba4YMJEO.js";import"./SwapRightOutlined-EgwF5-lN.js";import"./date-picker-BpzsXXGI.js";import{s as n}from"./es-DwX9Y9BE.js";import"./UpOutlined-CvRWPLjE.js";import"./spin-BgwR0sk-.js";import"./ArrowRightOutlined-C62FZmmk.js";import"./popconfirm-CRcJUvIt.js";import{Dn as r,En as i,Kn as a,Sn as o,Tn as s,Vn as c,Wn as l,Xn as u,bn as d,cn as f,cr as p,l as m,nr as h,tr as g,wn as _,xn as v}from"./index-PEy_QorE.js";import"./Icon-CtOaZygp.js";import{n as y,t as b}from"./useMessage-BbtFJn00.js";import"./dateUtil-htTZqwgG.js";import"./dashboard-cAW-ZTQa.js";import{t as x}from"./apis-BTEi7y-k.js";import{r as S}from"./illustration-Br3Eq0UW.js";import"./termRate-dmE6AoiS.js";const C=[{title:`Mã hồ sơ YCBH`,dataIndex:`appId`,width:200,customRender:({text:e})=>e.slice(0,5)+`******`},{title:`Tên khách hàng/Tên công ty`,dataIndex:[`lead`,`fullName`],width:220,customRender:({text:e})=>e},{title:`Loại khách hàng`,dataIndex:[`lead`,`isOrganization`],width:150,customRender:({value:e})=>e===!0?`Tổ chức`:`Cá nhân`},{title:`Mã số thuế/Giấy tờ tuỳ thân`,dataIndex:[`lead`,`isOrganization`],width:220,customRender:({value:e,record:t})=>{let n=e===!0||t?.lead?.isOrganization===!0,r=t?.lead?.taxNumber??`-`,i=t?.lead.idNumber??`-`;return n?r:i}},{title:`Giới tính`,dataIndex:[`lead`,`gender`],width:180,customRender:({text:e})=>e},{title:`Trạng thái`,dataIndex:`status`,width:150,customRender:({text:e})=>e},{title:`Ngày tạo`,dataIndex:`createdAt`,key:`toDateTime`,width:150},{title:`Ngày cập nhật`,dataIndex:`updatedAt`,key:`toDateTime`,width:150},{title:`Hành động`,key:`action`,width:120,fixed:`right`}];var w={key:1,class:`node-conatiner`},T=t(r({__name:`index`,setup(t){let r=f(),{createConfirm:T}=b(),E=h(),D=()=>E.value?.refresh(),O=g([{label:`Tạo báo giá`,type:`custom`,iconCustom:`EditOutlined`,onClick:e=>{r.push(`/quotes/create?appId=${e?.appId}`)}},{label:`Delete`,type:`custom`,iconCustom:`DeleteOutlined`,popConfirm:{title:`Bạn chắc chắn muốn xoá hồ sơ YCBH này?`,onConfirm:async e=>{console.log(e);try{if(e&&e.appId){var t=await S.remove(e.appId);console.log(`delete success`,t),m.success(t.message||`Đã xoá hồ sơ YCBH này`),D()}}catch(e){console.log(`delete`,e)}},onCancel:()=>{}}}]),k=g({leadId:null});g({type:`primary`,label:`Tạo mới`,onClick:()=>{}});let A=d(()=>[{type:`search`,name:`leadId`,placeholder:`Tìm mã khách hàng`,disabled:!0},{type:`lazyselect`,name:`leadId`,placeholder:`Chọn khách hàng`,pageSize:10,fetchApiUsers:M,labelKey:`fullName`,valueKey:`leadId`,allowClear:!0}]),j=async e=>{!e||e.length==0||T({title:`Xoá tất cả hồ sơ đã chọn`,content:`Are you sure to delete?`,iconType:`warning`,onOk(){m.info(`Đang phát triển`)}})},M=async(e,t,n)=>(await x.getAll({page:t,pageSize:n,leadId:e})).items;return(t,r)=>{let d=n,f=e,m=y,h=l(`router-view`);return c(),o(h,null,{default:u(({Component:e})=>[e?(c(),o(a(e),{key:0})):(c(),_(`div`,w,[r[1]||=v(`h2`,{class:`nc_title font18`},`Danh sách Hồ sơ YCBH`,-1),i(f,{type:`default`,style:{"margin-bottom":`5px`}},{default:u(()=>[i(d),r[0]||=s(` Ghi âm `,-1)]),_:1}),i(m,{ref_key:`ELRef`,ref:E,rowKey:`appId`,url:p(S).getAll,columns:p(C),items:p(A),actions:p(O),model:p(k),onOnDeleteAll:j,scroll:{x:1200,y:500}},null,8,[`url`,`columns`,`items`,`actions`,`model`])]))]),_:1})}}}),[[`__scopeId`,`data-v-8c0b3f90`]]);export{T as default};